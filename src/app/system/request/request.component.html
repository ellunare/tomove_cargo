<!-- STEP 1 ---------------------------------------------------------------------------------- -->

<div class="req-step"  [class.show-page]="req_page == 1">

	<gmap #gmap></gmap>

	<p class="p2  w100  tac">Choose your apartment type</p>
	<br>

	<form>
		<div class="types">
			<div class="type"  *ngFor="let p of PLACES">
				<input type="radio" 
					name="placetype" 
					[id]='p.type'
					[value]='p.type'
					[(ngModel)]="request.place" 
					(change)="onApartmentSelect()" 
					value={{p.type}}>
				<label class="radio" [for]='p.type'>{{p.type | uppercase}}</label>
			</div>
		</div>

		<br>

		<div class="p2  flex  jcsb" style="font-size: 1.2rem; margin-bottom: 5px;">
			<span>START</span>
			<span>FLOOR</span>
		</div>

		<div class="p2  flex  jcsb">

			<div class="place-type" (click)="showOnMap('O')">
				<img src="assets/i/marker.svg" *ngIf="search_O_map_render">
			</div>
			<!-- <p>Start</p> -->
			<input type="text" 
				class="adress-line"
				placeholder="Search for origin" 
				autocorrect="off" 
				autocapitalize="off" 
				spellcheck="off" 
				#search_O>

			<select class="floor" #floor_O 
				[(ngModel)]="request.adress.o.floor" 
				[ngModelOptions]="{standalone: true}" 
				(ngModelChange)="_toNumber('o')">
				<option 
					*ngFor="let f of floors" 
					value="{{f}}"
					[attr.selected]="f===1 ? true : null">
					{{f}}
				</option>
			</select>
		</div>

		<br>

		<div class="p2  flex  jcsb">
			<div class="switch-group">
				<label class="switch">
					<input type="checkbox"
						[(ngModel)]="request.adress.o.lift" 
						[ngModelOptions]="{standalone: true}">
					<div></div>
				</label>
				<label class="switch-name">Lift</label>
			</div>

			<!-- <div class="switch-group">
				<label class="switch">
					<input type="checkbox"
						[(ngModel)]="request.adress.o.packing" 
						[ngModelOptions]="{standalone: true}">
					<div></div>
				</label>
				<label class="switch-name">Packing</label>
			</div> -->
		</div>

		<!-- <br>

		<div class="p2  flex  jcsb">
			<div class="place-type">+</div>
			<div></div>
		</div> -->

		<br>
		<br>

		<div class="p2  flex  jcsb" style="font-size: 1.2rem; margin-bottom: 5px;">
			<span>FINISH</span>
			<span>FLOOR</span>
		</div>

		<div class="p2  flex  jcsb">

			<div class="place-type" (click)="showOnMap('D')">
				<img src="assets/i/marker.svg" *ngIf="search_D_map_render">
			</div>
			<!-- <p>Finish</p> -->
			<input type="text" 
				class="adress-line"
				placeholder="Search for destination" 
				autocorrect="off" 
				autocapitalize="off" 
				spellcheck="off" 
				#search_D>
				
			<select class="floor" #floor_D 
				[(ngModel)]="request.adress.d.floor" 
				[ngModelOptions]="{standalone: true}" 
				(ngModelChange)="_toNumber('d')">
				<option 
					*ngFor="let f of floors" 
					value="{{f}}"
					[attr.selected]="f===1 ? true : null">
					{{f}}
				</option>
			</select>
		</div>

		<br>
		
		<div class="p2  flex  jcsb">
			<div class="switch-group">
				<label class="switch">
					<input type="checkbox"
						[(ngModel)]="request.adress.d.lift" 
						[ngModelOptions]="{standalone: true}">
					<div></div>
				</label>
				<label class="switch-name">Lift</label>
			</div>

			<!-- <div></div> -->
		</div>

		<br>

		<div class="p2  tac" *ngIf="search_O_map_render && search_D_map_render">
			<p>Distance: {{request.route.distance}} km</p>
			<p>Time: {{timeTransform(request.route.time)}}</p>
		</div>

		<br>

		<div class="p2  flex  jcsb  tac">
			<div class="mh4  w100">
				<button class="button_big" (click)="showOnMap('R')" *ngIf="search_O_map_render && search_D_map_render">SHOW ROUTE</button>
			</div>
		</div>
		
		<br>

		<div class="p2  flex  jcsb" style="font-size: 1.2rem; margin-bottom: 5px;">
			<span>DATE</span>
			<span>TIME</span>
		</div>
		<div class="p2  flex  jcsb">
			<date-picker (outOnDateSelect)="evDTSelected($event, 'day')"></date-picker>
			<time-picker (outTimePicked)="evDTSelected($event, 'time')"></time-picker>
		</div>

	</form>

	<br>
	<br>

</div>


<!-- STEP 2 ---------------------------------------------------------------------------------- -->

<div class="req-step"  [class.show-page]="req_page == 2">

	<div class="p2 flex  jcsb  w100">
		<button class="btn-page" (click)="roomPage('prev')"><<</button>
		<span style="font-size: 2rem">{{request.rooms[current_room].name | uppercase}}</span>
		<button class="btn-page" (click)="roomPage('next')">>></button>
	</div>

	<div class="w100  tac">
		<div class="room-dot" 
			*ngFor="let r of request.rooms; let idx = index"
			[class.room-dot--selected]="idx == current_room"></div>
	</div>

	<div class="p2  item-list">
		<ul>
			<li class="item-list-name"
				*ngFor="let t of request.rooms[current_room].tags; let idxi = index" 
				>{{idxi + 1}} - {{t.name}}</li>

				<!-- <li>01 Freezer</li>
				<li>02 Sofa 4</li>
				<li>03 Wardrobe</li>
				<li>01 Freezer</li>
				<li>02 Sofa 4</li>
				<li>03 Wardrobe</li>
				<li>01 Freezer</li>
				<li>42 Sofa 4</li>
				<li>03 Wardrobe</li>
				<li>01 Freezer</li>
				<li>02 Sofa 4</li>
				<li>03 Wardrobe</li>
				<li>01 Freezer</li>
				<li>02 Sofa 4</li>
				<li>03 Wardrobe</li>
				<li>61 Freezer</li>
				<li>02 Sofa 4</li>
				<li>03 Wardrobe</li>
				<li>01 Freezer</li>
				<li>02 Sofa 4</li>
				<li>03 Wardrobe</li>
				<li>01 Freezer</li>
				<li>02 Sofa 4</li>
				<li>93 Wardrobe</li> -->
		</ul>
	</div>

	<!-- <br> -->
	<br>

	<!-- // //////////////////////////////////////////////////////////// -->

	<section class="cam-wrap">

		<div class="cam-main">
			<div class="cam-ramka" 
				#cam_ramka 
				(click)="addTag($event)">
				{{itemNumber("null")}}

				<div class="tags">
					<div class="tag" 
						*ngFor="let t of request.rooms[current_room].tags; let idx = index" 
						attr.data-id="{{t.idhash}}" 
						[style.margin-left.px]="t.tagX - 10"
						[style.margin-top.px]="t.tagY - 10">{{itemNumber()}}</div>
				</div>

				<div class="photos">
					<img 
						*ngFor="let p of request.rooms[current_room].pictures; let i = index"
						attr.data-id="{{i}}"
						[src]="sanitize(p)">
				</div>
			</div>
		</div>

		<label id="camera_icon" for="camera">
			<img src="../../../assets/i/camera.svg">
		</label>
		<input type="file" 
				accept="image/*" 
				id="camera" 
				capture="camera" 
				style="display: none"
				(change)="takePhoto($event)"
				#camera>

		<span class="cam-text"></span>

	</section>

	<item-picker 
		#item_picker
		(outItemSelected)="evItemSelected($event)">
	</item-picker>

	<!-- // //////////////////////////////////////////////////////////// -->
	
	<!-- <span>TOTAL PRICE - {{total_price}}</span> -->

	<!-- <ul>
		<li *ngFor="let i of roomItemList">{{i.name}} - {{i.price}}</li>
	</ul> -->
	
	<!-- <div class="furniture" style="display: none">
		<div 
			class="furniture-type" 
			*ngFor="let t of FURNITURE" 
			attr.data-id="{{t.id}}" 
			(click)="selectItemType($event)">
		
			<img src="../../../assets/f/{{t.id}}/icon.gif">
		</div>
	</div>

	<div class="modal-bg" *ngIf="showItems" style="display: none">
		<div class="furniture-select">
			<div 
				class="furniture-select__item" 
				*ngFor="let f of FURNITURE[f_typeId - 1].types" 
				attr.data-id="{{f.id}}"
				(click)="onItemSelected($event)">
				
				<img src="../../../assets/f/{{f_typeId}}/i/{{f.id}}.gif">
			</div>
		</div>
	</div> -->

</div>

<!-- STEP 3 ---------------------------------------------------------------------------------- -->

<div class="req-step"  [class.show-page]="req_page == 3">

	<div class="p2">
		<ul *ngFor="let r of request.rooms">
			<li *ngIf="r.tags.length">{{r.name | uppercase}}</li>
			<li> </li>
			<li class="item-list-name"
			*ngFor="let t of r.tags; let idxi = index" 
			>{{idxi + 1}} - {{t.name}}</li>
		</ul>
	</div>

	<br>
	<br>

	<div class="p2">
		<p>TOTAL PRICE:</p>
		<!-- <p>{{totalPrice}}</p> -->
	</div>

	<br>
	<br>

	<div class="p2  flex">

			<div class="carton-title">
				<p>Carton: </p>
			</div>
			<!-- <p>Start</p> -->
			<input type="number" class="carton-input"
				placeholder="Search for origin" 
				autocorrect="off" 
				autocapitalize="off" 
				spellcheck="off" 
				[(ngModel)]="request.packing.carton">

	</div>

	<!-- <button (click)="requestUpload()">PLACE REQUEST</button> -->
	<div class="deleteCanvasWrap">
		<canvas class="deleteCanvas" #canvasSS></canvas>
	</div>

	<div class="p2  flex  jcsb  tac">
		<div class="mh4  w100">
			<button class="button_big" (click)="totalPrice()">TOTAL PRICE</button>
			<button class="button_big" (click)="canvasDraw()">CANVAS</button>
		</div>
	</div>

	<p class="w100  tac">{{xx_canvas_msg}}</p>
	<p class="w100  tac">{{xx_upload_msg}}</p>
	<div class="loader" *ngIf="xx_loader">
		<div class="loader_circle"></div>
	</div>
	<a class="w100  tac" style="display: block" [href]="xx_download_link">{{xx_download_msg}}</a>
	
	<br>
	<br>

</div>


<!-- STEP 4 ---------------------------------------------------------------------------------- -->



<!-- COMMON AFTER ---------------------------------------------------------------------------------- -->

<!-- <br>
<br> -->

<div class="p2  flex  jcsb">
	<button class="btn-page" (click)="pager('P')" [class.hidden]="req_page == 1">PREV</button>
	<button class="btn-page" (click)="pager('N')">NEXT</button>
</div>

<!-- <button (click)="console()">Console</button> -->

<!-- PRELOAD FURNOTURE IMGS -->
<div class="furniture_preload">
	<div *ngFor="let fur of FUR">
		<img src="{{'/assets/f/' + fur.id + '/i/' + f.id + '.gif'}}" *ngFor="let f of fur.types">
	</div>
</div>